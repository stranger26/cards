<!DOCTYPE html>
<html>
<head>
<title>Card Swap</title>
<style>
	h1, h2 {
		text-align: center;
	}
	h1 {
		margin-bottom: 0;
	}
	h2 {
		color:gray;
		font-size: 1.2em;
		margin-top: 0;
	}
	.card {
		width: 10%;
		height: 10%;
		cursor: pointer;
	}
</style>
<script type="text/javascript">
	//Random generator
	function randomGen(n) {
		return Math.floor((Math.random() * n) + 1);
}
	//Card generator
	function cardGen() {
		//Suit generator
		var sv = randomGen(4);
		//Value generator
		var vv = randomGen(13);
		return [sv,vv];
}
	//Cardname converter
	function cardName() {
		var card=cardGen();
		var s = "";
		switch(card[0]) {
			case 1:
				s="spades";
				break;
			case 2:
				s="hearts";
				break;
			case 3:
				s="clubs";
				break;
			case 4:
				s="diamonds";
				break;
		}
		var v = "";
		switch(card[1]) {
			case 1:
				v="ace";
				break;
			case 11:
				v="jack";
				break;
			case 12:
				v="queen";
				break;
			case 13:
				v="king";
				break;
			default:
				v=card[1].toString();
		}
		return v+"_of_"+s;
	}
	//Array of cards without repeat
	function cardList(n) {
		var x = [];
		for (i=0; i<n; i++){
			var t = cardName();
			if (x.indexOf(t)<0) x.push(t);
			else i--;
		}
		return x;
		//document.getElementById("cards").innerHTML=x;
}
	//DOM create card in Cards div
	function createCard(card,i) {
		var x = document.createElement("img");
		x.setAttribute("src","./cards/"+card+".svg");
		x.setAttribute("alt",card);
		x.setAttribute("class","card");
		//x.setAttribute("draggable","true");
		//x.setAttribute("ondragstart","handleDragStart(event)");
		x.setAttribute("id","img"+i);
		x.setAttribute("onmousedown","imageToggle(this)");
		x.setAttribute("opacity",1);
		//x.setAttribute("ondrop","handleDrop(event)");
		//x.setAttribute("ondragover","allowDrop(event)");
		//x.setAttribute("ondragend","handleDragEnd(event)");
		document.getElementById("cards").appendChild(x);
}
	//reset cards
	function clearCards() {
		var element = document.getElementById("cards");
		while (element.firstChild) {
  		element.removeChild(element.firstChild);
}
	}
	//DOM create array of cards in Cards div
	function createCards(n) {
		//reset cards
		clearCards();
		x=cardList(n);
		for (i=0; i<x.length; i++){
				createCard(x[i],i);
			}
}
	//DOM create cards get X from textfield
	function createXCards() {
		var n = document.getElementById("number").value;
		if (n>52) {
			alert("Too many cards!");
		} else if (n<0) {
			alert("You owe me cards!");
		} else {
		createCards(n);
		}
}
	//Click
	var activeClick = 0;
	//update clicks on display
	function updateActive() {
		document.getElementById("activeclick").innerHTML = "Active click(s): "+activeClick;
	}
	//toggle image opacity
	function imageToggle(img) {
    	img.style.display = "inline-block";
		if (activeClick>2) {
			alert("You've chosen too many.");
		} else if (img.style.opacity==0.4){
			img.style.opacity=1;
			activeClick-=1;
		} else {
			img.style.opacity=0.4;
			activeClick+=1;
		}
		updateActive();
}
	//sort

</script>
</head>

<body>
<h1>Card Swap</h1>
<h2>A deck of cards</h2>
<!--align left 2/3, buttons for card counts, sample sets generation-->
<div class="buttons">
<!--<button onclick="createCards(3)">3</button>
<button onclick="createCard('2_of_clubs')">2Club</button>-->
<p>Generate 
<input type="number" id="number" name="number" value="3" min="0" max="52" size="5" maxlength="3">
cards 
<input type="submit" value="Go" onclick="createXCards()">
</p> 
</div>
<!--align right 1/3, counts of card swaps with history and reset button-->
<div class="count">
<!--display selected, swaps and -->
<p id="activeclick">Active click(s): 0</p>
</div>
<!--bottom 2/3 with cards-->
<div class="cards" id="cards">
<!--<img src="./cards/2_of_clubs.png" />-->
</div>
</body>
</html>